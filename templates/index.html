<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title>Africa Country Guessing Game</title>
    <style>
        *{
            box-sizing: border-box;
        }
        body{
            height: 100vh;
            margin: 0;
            padding: 0
            overflow-x: hidden;
        }
    </style>
</head>
<body>
    <div class="p-0 m-0 container-fluid h-100 bg-secondary-subtle">
        <div class="row flex-sm-column flex-md-row h-100 p-0 m-0">
            <div class="col-md-4 d-flex flex-column justify-content-center align-items-center h-md-100 p-3 m-0">
                            <!-- Flash message for guesses -->
                {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                <div class="alert alert-info">
                    {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">{{ message }}</div>
                    {% endfor %}
                </div>
                {% endif %}
                {% endwith %}
                <h1>Guess the African Country!</h1>
                <form action="/" method="POST" class="row g-3 needs-validation" novalidate>
                    <div class="col-md-12">
                        <label for="country" class="form-label fs-4">{{score}} / {{total}} Africa country</label>
                        <input type="text" name="country" class="form-control fs-4" id="country" placeholder="Enter a country name" required>
                        <div class="valid-feedback">
                            Looks good!
                        </div>
                    </div>
                    <div class="col-md-12">
                        <button class="btn btn-primary fs-4 col-md-12" type="submit">Submit</button>
                    </div>
                </form>
                <form action="{{ url_for('reset_session') }}" method="post">
                    <button type="submit" class="btn btn-danger fs-4 mt-2">Reset Game</button>
                </form>
                <p class="p-5 fs-4 text-center">
                    Have you run out of ideas?<br>
                    <a href="/corrections" class="link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover">
                        check for corrections
                    </a>
                </p>
            </div>
            <!-- Display the map -->
            <div id="map" class="col-md-8 d-flex justify-content-center align-items-center h-md-100 p-0 m-0">
                {{ map_html|safe }}
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Example starter JavaScript for disabling form submissions if there are invalid fields
        (function () {
          'use strict'

          // Fetch all the forms we want to apply custom Bootstrap validation styles to
          var forms = document.querySelectorAll('.needs-validation')

          // Loop over them and prevent submission
          Array.prototype.slice.call(forms)
            .forEach(function (form) {
              form.addEventListener('submit', function (event) {
                if (!form.checkValidity()) {
                  event.preventDefault()
                  event.stopPropagation()
                }

                form.classList.add('was-validated')
              }, false)
            })
        })()
    </script>
</body>
</html>
